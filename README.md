# acme-certificates

A repository with sample TLS certificates in the format that are typically used by Certificate Authorities (PEM, PKCS7, PKCS12).

This repository provides a sample server certificate signed by a sample CA with two intermediary CAs in a fictional Acme corporation.

The certificate hierarchy is following:

- `CN=Acme Root CA`
  - `CN=Acme Internal CA`
    - `CN=Acme Signing CA`
      - `CN=Server`

The purpose is to provide data for testing of server certificate import with different input formats.

All the certificates are generated by the [`acme_cert.sh`](acme_cert.sh) script. It requires Java 8 and `openssl` to be installed.

There are following files:

1. [`server.cer`](out/server.cer) - a signed server certificate in the PEM encoded X.509 format without the chain and without private key
2. [`server_full_chain.cer`](out/server_full_chain.cer) - a signed server certificate with the full the chain in PEM encoded X.509 format without private key
3. [`server_full_chain_private_key.cer`](out/server_full_chain_private_key.cer) - a signed server certificate with the full the chain and with private key in PEM encoded X.509 format
4. [`server_full_chain.p7b`](out/server_full_chain.p7b) - a signed server certificate with the full the chain in PEM encoded PKCS#7 format without private key
5. [`server_signing_ca.p7b`](out/server_signing_ca.p7b) - a signed server certificate with with the signing certificate in PEM encoded PKCS#7 format without other certificates in the chain and without private key (this the format that you will get from [Symantecâ„¢ Complete Website Security](https://www.websecurity.digicert.com/complete-website-security))
6. [`server.pkcs8`](out/server.pkcs8) - the private key in PEM encoded PKCS#8 format
7. [`server_one_entry.p12`](out/server_one_entry.p12) - a signed certificate with the full chain and private in one entry of a PKCS#12 keystore
8. [`server.p12`](out/server.p12) - a signed certificate with the full chain and private in one entry of a PKCS#12 keystore and entries for the CAs in the chain
9. [`signingca.cer`](out/signingca.cer), [`interca.cer`](out/interca.cer), [`rootca.cer`](out/rootca.cer) - public certificates of the intermediate and root CAs in the chain in the PEM encoded X.509 format

What is necessary for a server:

- public server certificate
- the full chain of public CA certificates to the root CA
- private key of the server certificate

This can be achieved with following files:

1. [`server_one_entry.p12`](out/server_one_entry.p12)
2. or [`server.p12`](out/server.p12)
3. or [`server.cer`](out/server.cer) + [`signingca.cer`](out/signingca.cer) + [`interca.cer`](out/interca.cer) + [`rootca.cer`](out/rootca.cer) + [`server.pkcs8`](out/server.pkcs8)
4. or [`server_full_chain.cer`](out/server_full_chain.cer) + [`server.pkcs8`](out/server.pkcs8)
5. or [`server_full_chain_private_key.cer`](out/server_full_chain_private_key.cer)

6. or [`server_signing_ca.p7b`](out/server_signing_ca.p7b) + [`interca.cer`](out/interca.cer) + [`rootca.cer`](out/rootca.cer) + [`server.pkcs8`](server.pkcs8)
7. other combinations that have all required parts (e.g. the private key can be provided in a PKCS#12 keystore)

_Why the full chain is required on the server?_ The server is required to provide enough information for certificate validation. Clients are expected to know and trust only the root CA. The public certificates of all CAs in the chain needs to available to the client and its the server that needs to provide them.

**Note:** [KeyStore Explorer](https://keystore-explorer.org/) is a useful tool for examining certificates and working with keystores.

This repository is using same extensions as the KeyStore Explorer in export actions:

- `.cer` - PEM encoded X.509 format with one or more certificates
- `.p12` - PKCS#12 keystore
- `.p7b` - PEM encoded PKCS#7 format with certificate and possibly their certificate chain
- `.pkcs8` - PEM encoded PKCS#8 format with a private key
